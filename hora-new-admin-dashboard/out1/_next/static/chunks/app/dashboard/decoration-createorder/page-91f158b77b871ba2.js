(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{7718:function(e,t,a){Promise.resolve().then(a.bind(a,4366))},4366:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var r=a(7437),l=a(2265),n=a(868);a(1005),a(643);var o=a(3145),s=a(3464),i=a(9706);let d=["560063","560030","560034","560007","560092","560024","560045","560003","560050","562107","560064","560047","560026","560086","560002","560070","560073","560053","560085","560043","560017","560001","560009","560025","560083","560076","560004","560079","560103","560046","560010","560049","560056","560068","560093","560018","560040","560097","560061","562130","560067","560036","560029","560062","560037","560071","562125","560016","560100","560005","560065","560019","560021","560022","560013","560087","560008","560051","560102","560104","560048","560094","560066","560038","560078","560006","560014","560015","560041","560069","560011","560020","560084","560096","560098","560095","560077","560074","560054","560023","560033","560055","560099","560072","560039","560075","560032","560058","560059","560080","560027","560012","560042","560028","560052","560091","110001","110002","110003","110004","110005","110006","110007","110008","110009","110010","110011","110012","110013","110014","110015","110016","110017","110018","110019","110020","110021","110022","110023","110024","110025","110026","110027","110028","110029","110030","110031","110032","110033","110034","110035","110036","110037","110038","110039","110040","110041","110042","110043","110044","110045","110046","110047","110048","110049","110051","110052","110053","110054","110055","110056","110057","110058","110059","110060","110061","110062","110063","110064","110065","110066","110067","110068","110070","110071","110073","110074","110075","110076","110078","110081","110082","110083","110084","110085","110086","110087","110088","110091","110092","110093","110094","110095","110096","201301","201302","201303","201304","201305","201306","201307","201309","201312","201308","201312","201315","201310","201318","122001","122002","122003","122006","122008","122009","122010","122011","122015","122016","122017","122018","201009","201001","201002","201003","201004","201005","201006","201007","201008","201010","201011","201012","201013","201014","201015","201016","201017","201018","121002","121001","121003","121004","121005","121006","121007","121008","121009","121010","122022"];var c=()=>{let[e,t]=(0,l.useState)(""),[a,c]=(0,l.useState)(""),[u,h]=(0,l.useState)(""),[m,p]=(0,l.useState)(""),[x,v]=(0,l.useState)(""),[g,j]=(0,l.useState)(""),[y,b]=(0,l.useState)(""),[C,f]=(0,l.useState)(""),[N,S]=(0,l.useState)(""),[_,I]=(0,l.useState)(""),[k,P]=(0,l.useState)(null),[M,w]=(0,l.useState)(!1),[A,O]=(0,l.useState)(!1),[F,D]=(0,l.useState)(!1),[T,B]=(0,l.useState)(""),[E,L]=(0,l.useState)(""),[q,W]=(0,l.useState)(""),[Z,z]=(0,l.useState)(""),[J,R]=(0,l.useState)(""),[U,Y]=(0,l.useState)(""),[Q,H]=(0,l.useState)([{name:"",price:""}]),[G,V]=(0,l.useState)(""),[X,K]=(0,l.useState)(""),[$,ee]=(0,l.useState)(!1),[et,ea]=(0,l.useState)(""),[er,el]=(0,l.useState)(""),[en,eo]=(0,l.useState)(null),[es,ei]=(0,l.useState)(!1),[ed,ec]=(0,l.useState)(""),[eu,eh]=(0,l.useState)(""),em=(e,t,a)=>{let r=[...Q];r[e][t]=a,H(r)},ep=()=>{H([...Q,{name:"",price:""}])};(0,l.useEffect)(()=>{e&&M&&!F&&(async()=>{try{var t,a,r,l;let n="".concat(i._n).concat(i.Ce).concat(encodeURIComponent(e)),o=await s.Z.get(n),d=null===(a=o.data)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t[0];console.log(null===(l=o.data)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r[0]),d?(P(d),c(d._id),h(d.price),O(!0),K("")):(O(!1),K("No product found"))}catch(e){console.error("Error fetching product:",e.message)}})()},[e,M,F]),(0,l.useEffect)(()=>{_?d.includes(_)?(B("Pincode available"),L("green")):(B("Pincode not available"),L("red")):(B(""),L(""))},[_]);let ex=async e=>{e.preventDefault(),ea(""),ee(!0);try{var t,a;let e=await s.Z.post("https://horaservices.com:3000/api/admin/admin_user_list",{email:"",page:"",per_page:2e3,phone:"",role:"customer"}),r=null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.users;if(r.length>0){console.log(r.length);let e=r.find(e=>e.phone===x);eo(e),e?(ea("Customer exists."),el("green")):(ea("Customer does not exist."),el("red"),ei(!0))}else ea("No users found in the response.")}catch(e){ea("An error occurred while checking the customer."),console.error(e)}finally{ee(!1)}},ev=async()=>{let e={name:ed,phone:eu,email:"",role:"customer"};console.log(e,"requestion data");try{let t=await s.Z.post("https://horaservices.com:3000/api/admin/user_signup",e);console.log("Customer added:",t.data.dataToSave._id),eo(t.data.dataToSave),ea("Customer successfully added."),el("green"),ei(!1)}catch(e){console.error("Error adding customer:",e),ea("Failed to add customer."),el("red")}},eg=e=>new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),ej=async()=>{try{let e=i._n+i.Qu,t=g+_;console.log(t,"address2");let a={address1:t,address2:y,locality:N,city:N,userId:en};console.log(a,"requestdataa");let r=await s.Z.post(e,a,{headers:{"Content-Type":"application/json",authorization:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2M2VkYjIzOWQ2ODBkNDdkOTU4NzBmYTAiLCJuYW1lIjoiQmhhcmF0IiwiZW1haWwiOiJiaGFyYXRneWFuY2hhbmRhbmkwMDFAZ21haWwuY29tIiwicGhvbmUiOiI4ODg0MjIxNDg3Iiwicm9sZSI6ImN1c3RvbWVyIiwiaWF0IjoxNzI2MTI1NDkyLCJleHAiOjE3NTc2NjE0OTJ9.HuVjkLUBi0sCpH9p3uPzQKtnO2OR910g9MviBlLY0QY"}});if(r.status===i.o)return r.data.data._id;return console.error("Failed to save address",r.status),null}catch(e){return console.log("Error in saveAddress:",e.message),null}},[ey,eb]=(0,l.useState)(!1),eC=async e=>{e.preventDefault(),eb(!0),console.log("handlesubmit");let t=Q.map(e=>({name:e.name,price:e.price})),a=m?eg(m):null,r=await ej();if(!r){console.error("Address ID is missing");return}let l={add_on:t,phone_no:x,toId:"",order_time:C.value,no_of_people:0,type:1,fromId:en,is_discount:"0",addressId:r,order_date:a,no_of_burner:0,order_locality:N,total_amount:q,orderApplianceIds:[],payable_amount:q,advance_amount:Z,is_gst:"0",order_type:!0,items:[k._id],decoration_comments:G,status:1,balance_amount:J,order_taken_by:U};console.log(l,"requestData decoration");try{let e=await s.Z.post("".concat(i._n).concat(i.EM),l);alert("Order created successfully:",e.data)}catch(e){console.error("Error creating order:",e),alert("There was an error creating the order. Please try again.")}finally{eb(!1)}};return(0,l.useEffect)(()=>{R(q-Z)},[q,Z]),(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("h1",{className:"createOrder pageHeading",children:"Create Decoration Order"}),(0,r.jsxs)("form",{className:"orderCreation form",onSubmit:eC,children:[(0,r.jsx)("label",{htmlFor:"dishName",children:"Product Name *"}),(0,r.jsx)("input",{type:"text",id:"dishName",value:e,onChange:e=>{t(e.target.value),D(!1),w(!1),O(!1)},placeholder:"Product Name",required:!0}),!M&&(0,r.jsx)("button",{type:"button",className:"orderCheck-btn",onClick:()=>{w(!0)},style:{marginTop:"10px"},disabled:""===e,children:"Continue"}),(0,r.jsx)("p",{class:"error-msg",style:{color:" red"},children:e&&M?X:""}),A&&k&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:"productid",children:"Product ID"}),(0,r.jsx)("input",{type:"text",id:"productid",value:a,readOnly:!0}),(0,r.jsx)("label",{htmlFor:"productprice",children:"Product Price"}),(0,r.jsx)("input",{type:"text",id:"productprice",value:u,readOnly:!0}),(0,r.jsxs)("div",{style:{marginTop:"10px"},children:[(0,r.jsx)("label",{htmlFor:"featuredImage",children:"Product Image"}),(0,r.jsx)("div",{children:(0,r.jsx)(o.default,{src:"https://horaservices.com/api/uploads/".concat(k.featured_image),alt:"Product",width:200,height:200,onError:e=>e.target.style.display="none"})})]}),(0,r.jsx)("label",{htmlFor:"customerNumber",children:"Customer Number*"}),(0,r.jsx)("input",{type:"text",id:"customerNumber",value:x,onChange:e=>v(e.target.value),placeholder:"Customer Number",required:!0}),(0,r.jsx)("button",{class:"orderCheck-btn",onClick:ex,disabled:$,children:$?"Checking...":"Check Customer"}),$&&(0,r.jsx)("p",{children:"Loading..."})," ",(0,r.jsx)("p",{style:{color:er},children:et}),"Customer exists."===et?(0,r.jsxs)("div",{className:"orderDeatils",children:[(0,r.jsx)("label",{htmlFor:"orderTakenBy",children:"Order Taken By*"}),(0,r.jsx)("input",{type:"text",id:"orderTakenBy",value:U,onChange:e=>Y(e.target.value),placeholder:"Order Taken By",required:!0}),(0,r.jsxs)("div",{className:"date-time-container",style:{display:"flex",alignItems:"center",gap:"2%"},children:[(0,r.jsxs)("div",{style:{marginRight:"10px"},children:[(0,r.jsx)("label",{htmlFor:"date",children:"Date *"}),(0,r.jsx)("input",{type:"date",id:"date",value:m,onChange:e=>p(e.target.value),required:!0})]}),(0,r.jsxs)("div",{style:{marginLeft:"10px"},children:[(0,r.jsx)("label",{htmlFor:"timeSlot",style:{marginBottom:"5px",display:"block"},children:"Time Slot*"}),(0,r.jsx)(n.ZP,{options:[{value:"7:00 AM - 10:00 AM",label:"7:00 AM - 10:00 AM"},{value:"10:00 AM - 1:00 PM",label:"10:00 AM - 1:00 PM"},{value:"1:00 PM - 4:00 PM",label:"1:00 PM - 4:00 PM"},{value:"4:00 PM - 7:00 PM",label:"4:00 PM - 7:00 PM"},{value:"7:00 PM - 10:00 PM",label:"7:00 PM - 10:00 PM"}],value:C,onChange:e=>f(e),placeholder:"Select Time Slot",required:!0})]})]}),(0,r.jsxs)("div",{className:"address-box",children:[(0,r.jsx)("label",{htmlFor:"address",children:"Address*"}),(0,r.jsx)("textarea",{type:"text",id:"address",value:g,onChange:e=>j(e.target.value),placeholder:"Address",required:!0})]}),(0,r.jsxs)("div",{className:"googleLocation-box",children:[(0,r.jsx)("label",{htmlFor:"googleLocation",children:"Google Location"}),(0,r.jsx)("textarea",{type:"text",id:"googleLocation",value:y,onChange:e=>b(e.target.value),placeholder:"googleLocation"})]}),(0,r.jsxs)("div",{className:"addon-container",children:[(0,r.jsx)("label",{htmlFor:"addOn",children:"Add On"}),(0,r.jsx)("form",{className:"addon-form",children:Q.map((e,t)=>(0,r.jsxs)("div",{className:"addon-row",children:[(0,r.jsx)("input",{type:"text",className:"addon-input name-input",placeholder:"Name",value:e.name,onChange:e=>em(t,"name",e.target.value)}),(0,r.jsx)("input",{type:"number",className:"addon-input price-input",placeholder:"Price",value:e.price,onChange:e=>em(t,"price",e.target.value)}),(0,r.jsx)("button",{type:"button",className:"add-new-btn",onClick:ep,children:"Add New"})]},t))})]}),(0,r.jsxs)("div",{className:"amount-box",children:[(0,r.jsx)("label",{htmlFor:"totalamount",children:"Total Amount*"}),(0,r.jsx)("input",{type:"text",id:"totalamount",value:q,onChange:e=>W(e.target.value),placeholder:"Total Amount",required:!0}),(0,r.jsx)("label",{htmlFor:"advanceamount",children:"Advance Amount"}),(0,r.jsx)("input",{type:"text",id:"advanceamount",value:Z,onChange:e=>z(e.target.value),placeholder:"Advance Amount"}),(0,r.jsx)("label",{htmlFor:"balanceamount",children:"Balance Amount"}),(0,r.jsx)("input",{type:"text",id:"balanceamount",value:J,placeholder:"Balance Amount",disabled:!0})]}),(0,r.jsxs)("div",{className:"cityPincode-box",style:{margin:"10px 0",width:"100%"},children:[(0,r.jsxs)("div",{className:"city-box",children:[(0,r.jsx)("label",{htmlFor:"city",style:{marginBottom:"5px",display:"block"},children:"City *"}),(0,r.jsxs)("select",{id:"city",value:N,onChange:e=>S(e.target.value),required:!0,style:{width:"100%",padding:"10px",borderRadius:"5px",fontSize:"16px",transition:"border-color 0.3s"},children:[(0,r.jsx)("option",{value:"",style:{color:"#aaa"},children:"Select City"}),(0,r.jsx)("option",{value:"Bangalore",children:"Bangalore"}),(0,r.jsx)("option",{value:"Delhi",children:"Delhi"}),(0,r.jsx)("option",{value:"Mumbai",children:"Mumbai"}),(0,r.jsx)("option",{value:"Hyderbad",children:"Hyderbad"})]})]}),(0,r.jsxs)("div",{className:"pincode-box",children:[(0,r.jsx)("label",{htmlFor:"pincode",children:"Pincode *"}),(0,r.jsx)("input",{type:"text",id:"pincode",value:_,onChange:e=>I(e.target.value)}),(0,r.jsx)("p",{style:{fontWeight:"bold",fontSize:"15px",color:E},children:T})]})]}),(0,r.jsxs)("div",{className:"checkoutInputType border-1 rounded-4",children:[(0,r.jsx)("h4",{children:"Share your comments (if any)"}),(0,r.jsx)("textarea",{className:"rounded border border-1 p-1 bg-white text-black",value:G,onChange:e=>{V(e.target.value)},cols:90,rows:4,placeholder:"Enter your comment."})]}),(0,r.jsx)("button",{className:"orderCheck-btn",type:"submit",children:ey?"Creating Order...":"Create Order"})]}):(0,r.jsxs)(r.Fragment,{children:[" ",ey&&(0,r.jsx)("div",{className:"loader",children:"Loading..."})]})]})]}),es&&(0,r.jsxs)("div",{className:"popup",children:[(0,r.jsx)("h2",{children:"Add New Customer"}),(0,r.jsxs)("label",{children:["Name:",(0,r.jsx)("input",{type:"text",value:ed,onChange:e=>ec(e.target.value)})]}),(0,r.jsx)("br",{}),(0,r.jsxs)("label",{children:["Phone:",(0,r.jsx)("input",{type:"text",value:eu,onChange:e=>eh(e.target.value)})]}),(0,r.jsx)("br",{}),(0,r.jsx)("button",{onClick:ev,children:"Add Customer"}),(0,r.jsx)("button",{onClick:()=>ei(!1),children:"Cancel"})]})]})}},9706:function(e,t,a){"use strict";a.d(t,{Ce:function(){return l},EM:function(){return n},Qu:function(){return o},_n:function(){return r},bU:function(){return s},o:function(){return i}});let r="https://horaservices.com:3000",l="/api/Decoration/searchByName/",n="/api/order/add",o="/api/users/address/editByUserID",s="/api/admin/adminOrderList",i=200},643:function(){}},function(e){e.O(0,[360,779,145,190,971,117,744],function(){return e(e.s=7718)}),_N_E=e.O()}]);